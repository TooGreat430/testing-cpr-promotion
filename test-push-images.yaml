steps:
  # Step 1: Copy docker image dari Artifact Registry source ke target
  - id: copy-docker-image-source-project
    name: gcr.io/cloud-builders/docker
    entrypoint: bash
    args:
      - -c
      - |
        set -e

        PIPELINE_SRC_IMAGE="asia-southeast2-docker.pkg.dev/bdi-onprem/custom-prediction-routine-sdk/image_docker_1:latest"
        PIPELINE_DEST_IMAGE="asia-southeast2-docker.pkg.dev/$_PROJECT_TARGET/$$REPO_NAME_TARGET/image_docker_1:latest"     
        
        docker pull "$$PIPELINE_SRC_IMAGE"
        docker tag "$$PIPELINE_SRC_IMAGE" "$$PIPELINE_DEST_IMAGE"
        docker push "$$PIPELINE_DEST_IMAGE"
options:
  logging: CLOUD_LOGGING_ONLY
  pool:
    name: projects/$PROJECT_ID/locations/asia-southeast2/workerPools/private-pool-dev
